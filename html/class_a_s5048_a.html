<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AS5048 Library: AS5048A Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AS5048 Library
   </div>
   <div id="projectbrief">Library for using the AS5048B magnetic encoders over SPI</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_a_s5048_a-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">AS5048A Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_a_s5048_8hpp_source.html">AS5048.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af768115714f23278caab8bf6705184a1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_s5048_a.html#af768115714f23278caab8bf6705184a1">AS5048A</a> (uint8_t arg_cs, uint8_t nullZone=3)</td></tr>
<tr class="memdesc:af768115714f23278caab8bf6705184a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="class_a_s5048_a.html#af768115714f23278caab8bf6705184a1">More...</a><br /></td></tr>
<tr class="separator:af768115714f23278caab8bf6705184a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac042ea3977dacb67fb6979fdc806c426"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_s5048_a.html#ac042ea3977dacb67fb6979fdc806c426">init</a> (uint32_t clock=1000000, uint8_t bitOrder=MSBFIRST, uint8_t dataMode=SPI_MODE1)</td></tr>
<tr class="memdesc:ac042ea3977dacb67fb6979fdc806c426"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializer sets up the SPI bus for communications with the chip. <br  />
  <a href="class_a_s5048_a.html#ac042ea3977dacb67fb6979fdc806c426">More...</a><br /></td></tr>
<tr class="separator:ac042ea3977dacb67fb6979fdc806c426"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b92fe5729e4ae953b613218b787e598"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_s5048_a.html#a7b92fe5729e4ae953b613218b787e598">close</a> ()</td></tr>
<tr class="separator:a7b92fe5729e4ae953b613218b787e598"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a51d0f120c38ef5f0cf86af140bb418"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_s5048_a.html#a3a51d0f120c38ef5f0cf86af140bb418">getMagnitude</a> ()</td></tr>
<tr class="separator:a3a51d0f120c38ef5f0cf86af140bb418"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a088c1b5391d870f1f5fceffa09f26169"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_s5048_a.html#a088c1b5391d870f1f5fceffa09f26169">getAngle</a> ()</td></tr>
<tr class="separator:a088c1b5391d870f1f5fceffa09f26169"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac136f69617d271efa965e345ed1185ae"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_s5048_a.html#ac136f69617d271efa965e345ed1185ae">getExpSmoothAngle</a> (float smoothingFactor)</td></tr>
<tr class="separator:ac136f69617d271efa965e345ed1185ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81f339b8fa460a3dee266cff8120b659"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_s5048_a.html#a81f339b8fa460a3dee266cff8120b659">getAverageAngle</a> (int numSamples)</td></tr>
<tr class="separator:a81f339b8fa460a3dee266cff8120b659"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb690687335a47b6bc1b9a4ca0699258"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_s5048_a.html#afb690687335a47b6bc1b9a4ca0699258">printDiagnostics</a> ()</td></tr>
<tr class="separator:afb690687335a47b6bc1b9a4ca0699258"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4734f6924cfd91f5ca5697e6e4915d92"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_s5048_a.html#a4734f6924cfd91f5ca5697e6e4915d92">getGain</a> ()</td></tr>
<tr class="separator:a4734f6924cfd91f5ca5697e6e4915d92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72eb67a1cd98a7dc8da292e973121a8a"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_s5048_a.html#a72eb67a1cd98a7dc8da292e973121a8a">getErrors</a> ()</td></tr>
<tr class="separator:a72eb67a1cd98a7dc8da292e973121a8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af37b63e85a888e2f4a6b2ce43b51179f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_s5048_a.html#af37b63e85a888e2f4a6b2ce43b51179f">error</a> ()</td></tr>
<tr class="separator:af37b63e85a888e2f4a6b2ce43b51179f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="af768115714f23278caab8bf6705184a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af768115714f23278caab8bf6705184a1">&#9670;&nbsp;</a></span>AS5048A()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AS5048A::AS5048A </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>arg_cs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>nullZone</em> = <code>3</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">{uint8_t}</td><td>arg_cs The pin used for selecting the chip. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a7b92fe5729e4ae953b613218b787e598"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b92fe5729e4ae953b613218b787e598">&#9670;&nbsp;</a></span>close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AS5048A::close </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Close the SPI bus. If you need to work with other devices on the same bus that do not have the same paramaters be sure to close the bus when you are done with a transaction. </p>

</div>
</div>
<a id="af37b63e85a888e2f4a6b2ce43b51179f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af37b63e85a888e2f4a6b2ce43b51179f">&#9670;&nbsp;</a></span>error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool AS5048A::error </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a088c1b5391d870f1f5fceffa09f26169"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a088c1b5391d870f1f5fceffa09f26169">&#9670;&nbsp;</a></span>getAngle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t AS5048A::getAngle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>getAngle </p><dl class="section return"><dt>Returns</dt><dd>{uint16_t} angle as a value in the interval [0,2^14-1]. Rotation counter clockwise from the current zero position </dd></dl>

</div>
</div>
<a id="a81f339b8fa460a3dee266cff8120b659"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81f339b8fa460a3dee266cff8120b659">&#9670;&nbsp;</a></span>getAverageAngle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t AS5048A::getAverageAngle </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numSamples</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>take a number of samples and return the circular mean value since we might have a situation where we are sampling at the transition from 2^14 - n to m for small integer n and small integer m, have to be carefull to normalize our data</p>

</div>
</div>
<a id="a72eb67a1cd98a7dc8da292e973121a8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72eb67a1cd98a7dc8da292e973121a8a">&#9670;&nbsp;</a></span>getErrors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t AS5048A::getErrors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac136f69617d271efa965e345ed1185ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac136f69617d271efa965e345ed1185ae">&#9670;&nbsp;</a></span>getExpSmoothAngle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t AS5048A::getExpSmoothAngle </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>smoothingFactor</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>getExpSmoothAngle </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">{float}</td><td>smoothingFactor </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>{uint16_t} angle as a value in the interval [0,2^14-1]. Rotation counter clockwise from the current zero position. This value is caclulated from the last angle read and the current angle read by the following formula new_angle = old_angle*(1 - smoothingFactor) + new_angle*smoothingFactor </dd></dl>
<p>use exponential smoothing to return the new reading since we might be crossing from 2^14 back to 0 we need to take care about normalizing our readings</p>

</div>
</div>
<a id="a4734f6924cfd91f5ca5697e6e4915d92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4734f6924cfd91f5ca5697e6e4915d92">&#9670;&nbsp;</a></span>getGain()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t AS5048A::getGain </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3a51d0f120c38ef5f0cf86af140bb418"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a51d0f120c38ef5f0cf86af140bb418">&#9670;&nbsp;</a></span>getMagnitude()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t AS5048A::getMagnitude </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>getMagnitude One of the diagnostic features of the AS5048 is that it can report the magnitude of the magnetic field </p><dl class="section return"><dt>Returns</dt><dd>{uint16_t} magnitude. </dd></dl>

</div>
</div>
<a id="ac042ea3977dacb67fb6979fdc806c426"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac042ea3977dacb67fb6979fdc806c426">&#9670;&nbsp;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AS5048A::init </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>clock</em> = <code>1000000</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bitOrder</em> = <code>MSBFIRST</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>dataMode</em> = <code>SPI_MODE1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializer sets up the SPI bus for communications with the chip. <br  />
 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clock</td><td>default value of 1KHz </td></tr>
    <tr><td class="paramname">bitOrder</td><td>default value of MSBFIRST </td></tr>
    <tr><td class="paramname">dataMode</td><td>default value of SPI_MODE1 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afb690687335a47b6bc1b9a4ca0699258"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb690687335a47b6bc1b9a4ca0699258">&#9670;&nbsp;</a></span>printDiagnostics()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AS5048A::printDiagnostics </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>lib/AS5048/<a class="el" href="_a_s5048_8hpp_source.html">AS5048.hpp</a></li>
<li>lib/AS5048/<a class="el" href="_a_s5048_a_8cpp.html">AS5048A.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
